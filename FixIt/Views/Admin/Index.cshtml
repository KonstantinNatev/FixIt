@model IEnumerable<FixIt.Models.RepairRequest>
@using FixIt.Models

<div class="container mt-5">
    <h2 class="mb-4">üõ†Ô∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∏ –ø–∞–Ω–µ–ª ‚Äì –ó–∞—è–≤–∫–∏</h2>

    <div class="table-responsive shadow-sm rounded">
        <table class="table table-hover align-middle table-bordered bg-white">
            <thead class="table-dark">
                <tr>
                    <th>–ò–º–µ</th>
                    <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                    <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–°–Ω–∏–º–∫–∞</th>
                    <th>–ü—Ä–æ–º–µ–Ω–∏ —Å—Ç–∞—Ç—É—Å</th>
                    <th>–ò–∑—Ç—Ä–∏–≤–∞–Ω–µ</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.ClientName</td>
                        <td>@item.Phone</td>
                        <td>@item.Category</td>
                        <td style="max-width: 250px;">@item.Description</td>
                        <td>
                            @switch (item.Status)
                            {
                                case RequestStatus.Waiting:
                                    <span class="badge bg-warning text-dark fs-6">–û—á–∞–∫–≤–∞</span>
                                    break;
                                case RequestStatus.Assigned:
                                    <span class="badge bg-info text-dark fs-6">–ù–∞–∑–Ω–∞—á–µ–Ω</span>
                                    break;
                                case RequestStatus.Completed:
                                    <span class="badge bg-success fs-6">–ó–∞–≤—ä—Ä—à–µ–Ω</span>
                                    break;
                            }
                        </td>
                        <td>
                            @if (!string.IsNullOrEmpty(item.ImagePath))
                            {
                                <img src="@item.ImagePath" alt="–°–Ω–∏–º–∫–∞" width="100" class="rounded border" />
                            }
                            else
                            {
                                <span class="text-muted">–ë–µ–∑ —Å–Ω–∏–º–∫–∞</span>
                            }
                        </td>
                        <td>
                            <form asp-action="ChangeStatus" asp-controller="Admin" method="post">
                                <input type="hidden" name="id" value="@item.Id" />
                                <select name="newStatus" class="form-select form-select-sm" onchange="this.form.submit()">
                                    <option value="Waiting" selected="@(item.Status == RequestStatus.Waiting)">–û—á–∞–∫–≤–∞</option>
                                    <option value="Assigned" selected="@(item.Status == RequestStatus.Assigned)">–ù–∞–∑–Ω–∞—á–µ–Ω</option>
                                    <option value="Completed" selected="@(item.Status == RequestStatus.Completed)">–ó–∞–≤—ä—Ä—à–µ–Ω</option>
                                </select>
                            </form>
                        </td>
                        <td>
                            <form asp-action="Delete" asp-controller="Admin" method="post" onsubmit="return confirm('–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏, —á–µ –∏—Å–∫–∞—à –¥–∞ –∏–∑—Ç—Ä–∏–µ—à –∑–∞—è–≤–∫–∞—Ç–∞?');">
                                <input type="hidden" name="id" value="@item.Id" />
                                <button class="btn btn-outline-danger btn-sm">–ò–∑—Ç—Ä–∏–π</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
